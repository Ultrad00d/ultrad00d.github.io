def f(s, m):
    # усл. победы — камней меньше или ровно 20
    if s <= 20: return m % 2 == 0
    if m == 0: return 0
    # из кучи можно отнять 1 камень, 5 или уменшить их вдвое
    h = [f(s - 2, m - 1), f(s - 5, m - 1), f(s // 2, m - 1)]

    return any(h) if m % 2 == 1 else all(h)