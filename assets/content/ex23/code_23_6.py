# создадим рекурсивную ф-ию с параметром command,
# в которую будем записывать последнюю команду исполнителя
def f(x, end, command=0):
    if x > end: return 0
    # если число совпало с концом
    if x == end:
        # и при этом команда третья (то есть C), то не подходит
        if command == 3: return 0
        # иначе, подходит
        return 1

    # будем сохранять последнюю команду через третий параметр
    return f(x + 2, end, 1) + f(x + 5, end, 2) + f(x ** 2, end, 3)

print(f(4, 36))